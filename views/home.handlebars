<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Base de Datos CasitaCasota</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #121212; /* Fondo muy oscuro */
            color: white;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        .sidebar {
            width: 260px;
            height: 100%;
            background: linear-gradient(180deg, #333, #222); /* Gradiente sutil de gris oscuro */
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.5);
        }

        .logo img {
            width: 100%;
            max-width: 220px;
            margin-bottom: 30px;
        }

        .menu {
            list-style-type: none;
            padding-left: 0;
        }

        .menu-item {
            background-color: transparent;
            color: lightgray;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s ease, color 0.3s;
        }

        .menu-item:hover,
        .menu-item.selected {
            background-color: #444; /* Gris claro al pasar el cursor */
            color: white;
            transform: scale(1.05); /* Sutil zoom para efecto de interactividad */
        }

        .main-content {
            flex-grow: 1;
            padding: 40px;
            background-color: #1d1d1d; /* Fondo más oscuro */
            overflow-y: auto;
            border-top-left-radius: 20px;
            border-bottom-left-radius: 20px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #fff;
            font-weight: 700;
        }

        .card {
            background-color: #333;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            transition: transform 0.2s ease, box-shadow 0.3s;
        }

        .card:hover {
            transform: translateY(-5px); /* Eleva la tarjeta al pasar el cursor */
            box-shadow: 0 8px 12px rgba(0, 0, 0, 0.4);
        }

        .card h2 {
            font-size: 1.8rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .card p {
            font-size: 1rem;
            color: #bbb;
        }

        /* Estilo para las tablas */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border: 1px solid #555;
        }

        th {
            background-color: #444;
        }

        td {
            background-color: #333;
        }

        /* Asegura que las tablas se ajusten en pantallas pequeñas */
        .table-wrapper {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        /* Ajustes para hacer la página más responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 220px;
                padding: 15px;
            }

            .menu-item {
                font-size: 14px;
                padding: 12px;
            }

            .main-content {
                padding: 25px;
            }

            h1 {
                font-size: 2rem;
            }

            .card h2 {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <div class="logo">
            <img src="files/images/1.png" alt="Logo Tienda">
        </div>
        <ul class="menu">
            <li class="menu-item"><a href="#contratos" style="text-decoration: none; color: inherit;">Contratos</a></li>
            <li class="menu-item"><a href="#tiendas" style="text-decoration: none; color: inherit;">Tiendas</a></li>
            <li class="menu-item"><a href="#inventarios" style="text-decoration: none; color: inherit;">Inventarios</a></li>
            <li class="menu-item"><a href="#productos" style="text-decoration: none; color: inherit;">Productos</a></li>
            <li class="menu-item"><a href="#proveedores" style="text-decoration: none; color: inherit;">Proveedores</a></li>
            <li class="menu-item"><a href="#trabajadores" style="text-decoration: none; color: inherit;">Trabajadores</a></li>
            <li class="menu-item"><a href="#pedidos" style="text-decoration: none; color: inherit;">Pedidos</a></li>
            <li class="menu-item"><a href="#vehiculos" style="text-decoration: none; color: inherit;">Vehículos</a></li>
            <li class="menu-item"><a href="#clientes" style="text-decoration: none; color: inherit;">Clientes</a></li>
        </ul>
    </div>
    
    <div class="main-content">
        <h1>Base de Datos CasitaCasota</h1>

<!-- Contratos -->
<div class="card" id="contratos">
    <h2>Contratos</h2>
    <div class="table-wrapper">
        <table>
            <thead>
                <tr>
                    <th>ID Contrato</th>
                    <th>Monto</th>
                    <th>Fecha Inicio Contrato</th>
                    <th>Fecha Fin Contrato</th>
                </tr>
            </thead>
            <tbody>
                {{#each contratos}}
                <tr>
                    <td>{{this.id_contrato}}</td>
                    <td>{{this.monto}}</td>
                    <td>{{this.fecha_inicio_de_contrato}}</td>
                    <td>{{this.fecha_fin_contrato}}</td>
                            <td>
          <button type="button" onclick="modificarContrato({{this.id_contrato}}, '{{this.monto}}', '{{this.fecha_inicio_de_contrato}}', '{{this.fecha_fin_contrato}}')">
            Modificar
          </button>
                        <form action="/eliminar-contrato" method="POST" style="display:inline;">
                            <input type="hidden" name="id_contrato" value="{{this.id_contrato}}">
                            <button type="submit">Eliminar</button>
                        </form>
        </td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </div>

    <!-- Formulario para agregar un nuevo contrato -->
    <h3>Agregar Contrato</h3>
<form action="/agregar-contrato" method="POST">
  <label for="id_contrato">ID Contrato:</label>
  <input type="number" id="id_contrato" name="id_contrato" required>

  <label for="monto">Monto:</label>
  <input type="number" id="monto" name="monto" required>

  <label for="fecha_inicio_de_contrato">Fecha de Inicio:</label>
  <input type="date" id="fecha_inicio_de_contrato" name="fecha_inicio_de_contrato" required>

  <label for="fecha_fin_contrato">Fecha de Fin:</label>
  <input type="date" id="fecha_fin_contrato" name="fecha_fin_contrato" required>

  <button type="submit">Agregar Contrato</button>
</form>

    <!-- Formulario para modificar un contrato (oculto por defecto) -->
    <h3>Modificar Contrato</h3>
    <form id="modificar-contrato-form" action="/modificar-contrato" method="POST" style="display: none;">
        <input type="hidden" name="id_contrato" id="modificar-id_contrato">
        <label for="modificar-monto">Monto:</label>
        <input type="number" name="monto" id="modificar-monto" required>
        <label for="modificar-fecha_inicio_de_contrato">Fecha Inicio:</label>
        <input type="date" name="fecha_inicio_de_contrato" id="modificar-fecha_inicio_de_contrato" required>
        <label for="modificar-fecha_fin_contrato">Fecha Fin:</label>
        <input type="date" name="fecha_fin_contrato" id="modificar-fecha_fin_contrato" required>
        <button type="submit">Modificar</button>
    </form>
    </div>

    <script>
// Función para mostrar el formulario de modificación con los datos actuales
function modificarContrato(id, monto, fecha_inicio_de_contrato, fecha_fin_contrato) {
    document.getElementById('modificar-id_contrato').value = id;
    document.getElementById('modificar-monto').value = monto;
    document.getElementById('modificar-fecha_inicio_de_contrato').value = fecha_inicio_de_contrato;
    document.getElementById('modificar-fecha_fin_contrato').value = fecha_fin_contrato;

    // Mostrar el formulario de modificación
    document.getElementById('modificar-contrato-form').style.display = 'block';
}

</script>

        <!-- Tiendas -->
        <div class="card" id="tiendas">
            <h2>Tiendas</h2>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>ID Tienda</th>
                            <th>Nombre</th>
                            <th>Dirección</th>
                            <th>Región</th>
                            <th>Número de Trabajadores</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each tiendas}}
                        <tr>
                            <td>{{this.id_tienda}}</td>
                            <td>{{this.nombre}}</td>
                            <td>{{this.direccion}}</td>
                            <td>{{this.region}}</td>
                            <td>{{this.numero_trabajadores}}</td>
                            <td>
                        <button type="button" onclick="modificarTienda({{this.id_tienda}}, '{{this.nombre}}', '{{this.direccion}}', '{{this.region}}', '{{this.numero_trabajadores}}')">
                            Modificar
                        </button>
                        <form action="/eliminar-tienda" method="POST" style="display:inline;">
                            <input type="hidden" name="id_tienda" value="{{this.id_tienda}}">
                            <button type="submit">Eliminar</button>
                        </form>
                    </td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>

<!-- Formulario para agregar una nueva tienda -->
<h3>Agregar Tienda</h3>
<form action="/agregar-tienda" method="POST">
   <label for="id_tienda">ID Tienda:</label>
   <input type="number" id="id_tienda" name="id_tienda" required>

    <label for="nombre">Nombre:</label>
    <input type="text" id="nombre" name="nombre" required>

    <label for="direccion">Dirección:</label>
    <input type="text" id="direccion" name="direccion" required>

    <label for="region">Región:</label>
    <input type="text" id="region" name="region" required>

    <label for="numero_trabajadores">Número de Trabajadores:</label>
    <input type="number" id="numero_trabajadores" name="numero_trabajadores" required>

    <button type="submit">Agregar Tienda</button>
</form>

<!-- Formulario para modificar una tienda (oculto por defecto) -->
<h3>Modificar Tienda</h3>
<form id="modificar-tienda-form" action="/modificar-tienda" method="POST" style="display: none;">
    <input type="hidden" name="id_tienda" id="modificar-id_tienda">
    <label for="modificar-nombre">Nombre:</label>
    <input type="text" name="nombre" id="modificar-nombre" required>

    <label for="modificar-direccion">Dirección:</label>
    <input type="text" name="direccion" id="modificar-direccion" required>

    <label for="modificar-region">Región:</label>
    <input type="text" name="region" id="modificar-region" required>

    <label for="modificar-numero_trabajadores">Número de Trabajadores:</label>
    <input type="number" name="numero_trabajadores" id="modificar-numero_trabajadores" required>

    <button type="submit">Modificar</button>
</form>
</div>

<script>
// Función para mostrar el formulario de modificación con los datos actuales
function modificarTienda(id, nombre, direccion, region, numero_trabajadores) {
    document.getElementById('modificar-id_tienda').value = id;
    document.getElementById('modificar-nombre').value = nombre;
    document.getElementById('modificar-direccion').value = direccion;
    document.getElementById('modificar-region').value = region;
    document.getElementById('modificar-numero_trabajadores').value = numero_trabajadores;

    // Mostrar el formulario de modificación
    document.getElementById('modificar-tienda-form').style.display = 'block';
}
</script>
        
        <!-- Inventarios -->
        <div class="card" id="inventarios">
            <h2>Inventarios</h2>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>ID_Inventario</th>
                            <th>Capacidad</th>
                            <th>Categoría</th>
                            <th>Cantidad_Disponible</th>
                            <th>ID_Tienda</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each inventarios}}
                        <tr>
                            <td>{{this.id_inventario}}</td>
                            <td>{{this.capacidad}}</td>
                            <td>{{this.categoria}}</td>
                            <td>{{this.cantidad_disponible}}</td>
                            <td>{{this.id_tienda}}</td>
                        <td>
                        <button type="button" onclick="modificarInventario({{this.id_inventario}}, {{this.capacidad}}, '{{this.categoria}}', {{this.cantidad_disponible}}, {{this.id_tienda}})">
                            Modificar
                        </button>
                        <form action="/eliminar-inventario" method="POST" style="display:inline;">
                            <input type="hidden" name="id_inventario" value="{{this.id_inventario}}">
                            <button type="submit">Eliminar</button>
                        </form>
                    </td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>

<!-- Formulario para agregar un nuevo inventario -->
<h3>Agregar Inventario</h3>
<form action="/agregar-inventario" method="POST">
    <label for="id_inventario">ID Inventario:</label>
    <input type="number" id="id_inventario" name="id_inventario" required>

    <label for="capacidad">Capacidad:</label>
    <input type="number" id="capacidad" name="capacidad" required>

    <label for="categoria">Categoría:</label>
    <input type="text" id="categoria" name="categoria" required>

    <label for="cantidad_disponible">Cantidad Disponible:</label>
    <input type="number" id="cantidad_disponible" name="cantidad_disponible" required>

    <label for="id_tienda">ID Tienda:</label>
    <input type="number" id="id_tienda" name="id_tienda" required>

    <button type="submit">Agregar Inventario</button>
</form>

<!-- Formulario para modificar un inventario (oculto por defecto) -->
<h3>Modificar Inventario</h3>
<form id="modificar-inventario-form" action="/modificar-inventario" method="POST" style="display: none;">
    <input type="hidden" name="id_inventario" id="modificar-id_inventario">

    <label for="modificar-capacidad">Capacidad:</label>
    <input type="number" name="capacidad" id="modificar-capacidad" required>

    <label for="modificar-categoria">Categoría:</label>
    <input type="text" name="categoria" id="modificar-categoria" required>

    <label for="modificar-cantidad_disponible">Cantidad Disponible:</label>
    <input type="number" name="cantidad_disponible" id="modificar-cantidad_disponible" required>

    <label for="modificar-id_tienda">ID Tienda:</label>
    <input type="number" name="id_tienda" id="modificar-id_tienda" required>

    <button type="submit">Modificar Inventario</button>
</form>
</div>

<script>
// Función para mostrar el formulario de modificación con los datos actuales
function modificarInventario(id, capacidad, categoria, cantidad_disponible, id_tienda) {
    document.getElementById('modificar-id_inventario').value = id;
    document.getElementById('modificar-capacidad').value = capacidad;
    document.getElementById('modificar-categoria').value = categoria;
    document.getElementById('modificar-cantidad_disponible').value = cantidad_disponible;
    document.getElementById('modificar-id_tienda').value = id_tienda;

    // Mostrar el formulario de modificación
    document.getElementById('modificar-inventario-form').style.display = 'block';
}
</script>


        <!-- Productos -->
        <div class="card" id="productos">
            <h2>Productos</h2>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>ID Producto</th>
                            <th>Nombre</th>
                            <th>Categoría</th>
                            <th>Precio</th>
                            <th>Marca</th>
                            <th>Peso</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each productos}}
                        <tr>
                            <td>{{this.id_producto}}</td>
                            <td>{{this.nombre}}</td>
                            <td>{{this.categoria}}</td>
                            <td>{{this.precio}}</td>
                            <td>{{this.marca}}</td>
                            <td>{{this.peso}}</td>
                    <td>
                        <button type="button" onclick="modificarProducto({{this.id_producto}}, '{{this.nombre}}', '{{this.categoria}}', {{this.precio}}, '{{this.marca}}', {{this.peso}})">
                            Modificar
                        </button>
                        <form action="/eliminar-producto" method="POST" style="display:inline;">
                            <input type="hidden" name="id_producto" value="{{this.id_producto}}">
                            <button type="submit">Eliminar</button>
                        </form>
                    </td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
<!-- Formulario para agregar un nuevo producto -->
<h3>Agregar Producto</h3>
<form action="/agregar-producto" method="POST">
    <label for="id_producto">ID Producto:</label>
    <input type="number" id="id_producto" name="id_producto" required>

    <label for="nombre">Nombre:</label>
    <input type="text" id="nombre" name="nombre" required>

    <label for="categoria">Categoría:</label>
    <input type="text" id="categoria" name="categoria" required>

    <label for="precio">Precio:</label>
    <input type="number" id="precio" name="precio" required>

    <label for="marca">Marca:</label>
    <input type="text" id="marca" name="marca" required>

    <label for="peso">Peso:</label>
    <input type="number" id="peso" name="peso" required>

    <button type="submit">Agregar Producto</button>
</form>

<!-- Formulario para modificar un producto (oculto por defecto) -->
<h3>Modificar Producto</h3>
<form id="modificar-producto-form" action="/modificar-producto" method="POST" style="display: none;">
    <input type="hidden" name="id_producto" id="modificar-id_producto">

    <label for="modificar-nombre">Nombre:</label>
    <input type="text" name="nombre" id="modificar-nombre" required>

    <label for="modificar-categoria">Categoría:</label>
    <input type="text" name="categoria" id="modificar-categoria" required>

    <label for="modificar-precio">Precio:</label>
    <input type="number" name="precio" id="modificar-precio" required>

    <label for="modificar-marca">Marca:</label>
    <input type="text" name="marca" id="modificar-marca" required>

    <label for="modificar-peso">Peso:</label>
    <input type="number" name="peso" id="modificar-peso" required>

    <button type="submit">Modificar Producto</button>
</form>
</div>

<script>
// Función para mostrar el formulario de modificación con los datos actuales
function modificarProducto(id, nombre, categoria, precio, marca, peso) {
    document.getElementById('modificar-id_producto').value = id;
    document.getElementById('modificar-nombre').value = nombre;
    document.getElementById('modificar-categoria').value = categoria;
    document.getElementById('modificar-precio').value = precio;
    document.getElementById('modificar-marca').value = marca;
    document.getElementById('modificar-peso').value = peso;

    // Mostrar el formulario de modificación
    document.getElementById('modificar-producto-form').style.display = 'block';
}
</script>

        <!-- Proveedores -->
        <div class="card" id="proveedores">
            <h2>Proveedores</h2>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>ID Proveedor</th>
                            <th>Nombre</th>
                            <th>Dirección</th>
                            <th>Tiempo de Entrega (en días)</th>
                            <th>Tipo de Productos</th>
                            <th>ID_Contrato</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each proveedores}}
                        <tr>
                            <td>{{this.id_proveedor}}</td>
                            <td>{{this.nombre}}</td>
                            <td>{{this.direccion}}</td>
                            <td>{{this.tiempo_entrega}}</td>
                            <td>{{this.tipo_productos}}</td>
                            <td>{{this.id_contrato}}</td>
                            <td>
                        <button onclick="modificarProveedor({{this.id_proveedor}}, '{{this.nombre}}', '{{this.direccion}}', '{{this.tiempo_entrega}}', '{{this.tipo_productos}}', {{this.id_contrato}})">Modificar</button>
                            <form action="/eliminar-proveedor" method="POST" style="display:inline;">
                            <input type="hidden" name="id_proveedor" value="{{this.id_proveedor}}">
                            <button type="submit">Eliminar</button>
                        </form>
                    </td>
                     </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
<!-- Formulario para agregar un nuevo proveedor -->
<h3>Agregar Proveedor</h3>
<form action="/agregar-proveedor" method="POST">
    <label for="id_proveedor">ID Proveedor:</label>
    <input type="number" id="id_proveedor" name="id_proveedor" required>

    <label for="nombre">Nombre:</label>
    <input type="text" id="nombre" name="nombre" required>

    <label for="direccion">Dirección:</label>
    <input type="text" id="direccion" name="direccion" required>

    <label for="tiempo_entrega">Tiempo de Entrega (en días):</label>
    <input type="text" id="tiempo_entrega" name="tiempo_entrega" required>

    <label for="tipo_productos">Tipo de Productos:</label>
    <input type="text" id="tipo_productos" name="tipo_productos" required>

    <label for="id_contrato">ID Contrato:</label>
    <input type="number" id="id_contrato" name="id_contrato" required>

    <button type="submit">Agregar Proveedor</button>
</form>

<!-- Formulario para modificar un proveedor (oculto por defecto) -->
<h3>Modificar Proveedor</h3>
<form id="modificar-proveedor-form" action="/modificar-proveedor" method="POST" style="display: none;">
    <input type="hidden" name="id_proveedor" id="modificar-id_proveedor">
    <label for="modificar-nombre">Nombre:</label>
    <input type="text" name="nombre" id="modificar-nombre" required>
    <label for="modificar-direccion">Dirección:</label>
    <input type="text" name="direccion" id="modificar-direccion" required>
    <label for="modificar-tiempo_entrega">Tiempo de Entrega:</label>
    <input type="text" name="tiempo_entrega" id="modificar-tiempo_entrega" required>
    <label for="modificar-tipo_productos">Tipo de Productos:</label>
    <input type="text" name="tipo_productos" id="modificar-tipo_productos" required>
    <label for="modificar-id_contrato">ID Contrato:</label>
    <input type="number" name="id_contrato" id="modificar-id_contrato" required>
    <button type="submit">Modificar</button>
</form>
</div>

<script>
// Función para mostrar el formulario de modificación con los datos actuales
function modificarProveedor(id, nombre, direccion, tiempo_entrega, tipo_productos, id_contrato) {
    document.getElementById('modificar-id_proveedor').value = id;
    document.getElementById('modificar-nombre').value = nombre;
    document.getElementById('modificar-direccion').value = direccion;
    document.getElementById('modificar-tiempo_entrega').value = tiempo_entrega;
    document.getElementById('modificar-tipo_productos').value = tipo_productos;
    document.getElementById('modificar-id_contrato').value = id_contrato;

    // Mostrar el formulario de modificación
    document.getElementById('modificar-proveedor-form').style.display = 'block';
}
</script>

        <!-- Trabajadores -->
        <div class="card" id="trabajadores">
            <h2>Trabajadores</h2>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>RUT_Trabajador</th>
                            <th>Nombre</th>
                            <th>Edad</th>
                            <th>Cargo</th>
                            <th>ID_Tienda</th>
                            <th>ID_Contrato</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each trabajadores}}
                        <tr>
                            <td>{{this.rut_trabajador}}</td>
                            <td>{{this.nombre}}</td>
                            <td>{{this.edad}}</td>
                            <td>{{this.cargo}}</td>
                            <td>{{this.id_tienda}}</td>
                            <td>{{this.id_contrato}}</td>
                    <td>
                        <button type="button" onclick="modificarTrabajador('{{this.rut_trabajador}}', '{{this.nombre}}', {{this.edad}}, '{{this.cargo}}', {{this.id_tienda}}, {{this.id_contrato}})">
                            Modificar
                        </button>
                        <form action="/eliminar-trabajador" method="POST" style="display:inline;">
                            <input type="hidden" name="rut_trabajador" value="{{this.rut_trabajador}}">
                            <button type="submit">Eliminar</button>
                        </form>
                    </td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
<!-- Formulario para agregar un nuevo trabajador -->
<h3>Agregar Trabajador</h3>
<form action="/agregar-trabajador" method="POST">
   <label for="rut_trabajador">RUT Trabajador:</label>
   <input type="text" id="rut_trabajador" name="rut_trabajador" required>

   <label for="nombre">Nombre:</label>
   <input type="text" id="nombre" name="nombre" required>

   <label for="edad">Edad:</label>
   <input type="number" id="edad" name="edad" required>

   <label for="cargo">Cargo:</label>
   <input type="text" id="cargo" name="cargo" required>

   <label for="id_tienda">ID Tienda:</label>
   <input type="number" id="id_tienda" name="id_tienda" required>

   <label for="id_contrato">ID Contrato:</label>
   <input type="number" id="id_contrato" name="id_contrato" required>

   <button type="submit">Agregar Trabajador</button>
</form>

<!-- Formulario para modificar un trabajador (oculto por defecto) -->
<h3>Modificar Trabajador</h3>
<form id="modificar-trabajador-form" action="/modificar-trabajador" method="POST" style="display: none;">
    <input type="hidden" name="rut_trabajador" id="modificar-rut_trabajador">

    <label for="modificar-nombre">Nombre:</label>
    <input type="text" name="nombre" id="modificar-nombre" required>

    <label for="modificar-edad">Edad:</label>
    <input type="number" name="edad" id="modificar-edad" required>

    <label for="modificar-cargo">Cargo:</label>
    <input type="text" name="cargo" id="modificar-cargo" required>

    <label for="modificar-id_tienda">ID Tienda:</label>
    <input type="number" name="id_tienda" id="modificar-id_tienda" required>

    <label for="modificar-id_contrato">ID Contrato:</label>
    <input type="number" name="id_contrato" id="modificar-id_contrato" required>

    <button type="submit">Modificar</button>
</form>
</div>

<script>
// Función para mostrar el formulario de modificación con los datos actuales
function modificarTrabajador(rut_trabajador, nombre, edad, cargo, id_tienda, id_contrato) {
    document.getElementById('modificar-rut_trabajador').value = rut_trabajador;
    document.getElementById('modificar-nombre').value = nombre;
    document.getElementById('modificar-edad').value = edad;
    document.getElementById('modificar-cargo').value = cargo;
    document.getElementById('modificar-id_tienda').value = id_tienda;
    document.getElementById('modificar-id_contrato').value = id_contrato;

    // Mostrar el formulario de modificación
    document.getElementById('modificar-trabajador-form').style.display = 'block';
}
</script>

        <!-- Pedidos -->
        <div class="card" id="pedidos">
            <h2>Pedidos</h2>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>ID_Pedido</th>
                            <th>ID_Proveedor</th>
                            <th>ID_Tienda</th>
                            <th>Fecha</th>
                            <th>ID_Producto</th>
                            <th>Cantidad</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each pedidos}}
                        <tr>
                            <td>{{this.id_pedido}}</td>
                            <td>{{this.id_proveedor}}</td>
                            <td>{{this.id_tienda}}</td>
                            <td>{{this.fecha}}</td>
                            <td>{{this.id_producto}}</td>
                            <td>{{this.cantidad}}</td>
                    <td>
                        <button type="button" onclick="modificarPedido({{this.id_pedido}}, {{this.id_proveedor}}, {{this.id_tienda}}, '{{this.fecha}}', {{this.id_producto}}, {{this.cantidad}})">
                            Modificar
                        </button>
                        <form action="/eliminar-pedido" method="POST" style="display:inline;">
                            <input type="hidden" name="id_pedido" value="{{this.id_pedido}}">
                            <button type="submit">Eliminar</button>
                        </form>
                    </td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
<!-- Formulario para agregar un nuevo pedido -->
<h3>Agregar Pedido</h3>
<form action="/agregar-pedido" method="POST">
   <label for="id_pedido">ID Pedido:</label>
   <input type="number" id="id_pedido" name="id_pedido" required>

   <label for="id_proveedor">ID Proveedor:</label>
   <input type="number" id="id_proveedor" name="id_proveedor" required>

   <label for="id_tienda">ID Tienda:</label>
   <input type="number" id="id_tienda" name="id_tienda" required>

   <label for="fecha">Fecha:</label>
   <input type="date" id="fecha" name="fecha" required>

   <label for="id_producto">ID Producto:</label>
   <input type="number" id="id_producto" name="id_producto" required>

   <label for="cantidad">Cantidad:</label>
   <input type="number" id="cantidad" name="cantidad" required>

   <button type="submit">Agregar Pedido</button>
</form>

<!-- Formulario para modificar un pedido (oculto por defecto) -->
<h3>Modificar Pedido</h3>
<form id="modificar-pedido-form" action="/modificar-pedido" method="POST" style="display: none;">
    <input type="hidden" name="id_pedido" id="modificar-id_pedido">

    <label for="modificar-id_proveedor">ID Proveedor:</label>
    <input type="number" name="id_proveedor" id="modificar-id_proveedor" required>

    <label for="modificar-id_tienda">ID Tienda:</label>
    <input type="number" name="id_tienda" id="modificar-id_tienda" required>

    <label for="modificar-fecha">Fecha:</label>
    <input type="date" name="fecha" id="modificar-fecha" required>

    <label for="modificar-id_producto">ID Producto:</label>
    <input type="number" name="id_producto" id="modificar-id_producto" required>

    <label for="modificar-cantidad">Cantidad:</label>
    <input type="number" name="cantidad" id="modificar-cantidad" required>

    <button type="submit">Modificar</button>
</form>
</div>

<script>
// Función para mostrar el formulario de modificación con los datos actuales
function modificarPedido(id_pedido, id_proveedor, id_tienda, fecha, id_producto, cantidad) {
    document.getElementById('modificar-id_pedido').value = id_pedido;
    document.getElementById('modificar-id_proveedor').value = id_proveedor;
    document.getElementById('modificar-id_tienda').value = id_tienda;
    document.getElementById('modificar-fecha').value = fecha;
    document.getElementById('modificar-id_producto').value = id_producto;
    document.getElementById('modificar-cantidad').value = cantidad;

    // Mostrar el formulario de modificación
    document.getElementById('modificar-pedido-form').style.display = 'block';
}
</script>

        <!-- Vehículos -->
        <div class="card" id="vehiculos">
            <h2>Vehículos</h2>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Patente</th>
                            <th>RUT_Trabajador</th>
                            <th>Capacidad</th>
                            <th>Region</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each vehiculos}}
                        <tr>
                            <td>{{this.patente}}</td>
                            <td>{{this.rut_trabajador}}</td>
                            <td>{{this.capacidad}}</td>
                            <td>{{this.region}}</td>
                    <td>
                        <button type="button" onclick="modificarVehiculo('{{this.patente}}', '{{this.rut_trabajador}}', {{this.capacidad}}, '{{this.region}}')">
                            Modificar
                        </button>
                        <form action="/eliminar-vehiculo" method="POST" style="display:inline;">
                            <input type="hidden" name="patente" value="{{this.patente}}">
                            <button type="submit">Eliminar</button>
                        </form>
                    </td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
<!-- Formulario para agregar un nuevo vehículo -->
<h3>Agregar Vehículo</h3>
<form action="/agregar-vehiculo" method="POST">
   <label for="patente">Patente:</label>
   <input type="text" id="patente" name="patente" required>

   <label for="rut_trabajador">RUT Trabajador:</label>
   <input type="text" id="rut_trabajador" name="rut_trabajador" required>

   <label for="capacidad">Capacidad:</label>
   <input type="number" id="capacidad" name="capacidad" required>

   <label for="region">Región:</label>
   <input type="text" id="region" name="region" required>

   <button type="submit">Agregar Vehículo</button>
</form>

<!-- Formulario para modificar un vehículo (oculto por defecto) -->
<h3>Modificar Vehículo</h3>
<form id="modificar-vehiculo-form" action="/modificar-vehiculo" method="POST" style="display: none;">
    <input type="hidden" name="patente" id="modificar-patente">

    <label for="modificar-rut_trabajador">RUT Trabajador:</label>
    <input type="text" name="rut_trabajador" id="modificar-rut_trabajador" required>

    <label for="modificar-capacidad">Capacidad:</label>
    <input type="number" name="capacidad" id="modificar-capacidad" required>

    <label for="modificar-region">Región:</label>
    <input type="text" name="region" id="modificar-region" required>

    <button type="submit">Modificar</button>
</form>
</div>

<script>
// Función para mostrar el formulario de modificación con los datos actuales
function modificarVehiculo(patente, rut_trabajador, capacidad, region) {
    document.getElementById('modificar-patente').value = patente;
    document.getElementById('modificar-rut_trabajador').value = rut_trabajador;
    document.getElementById('modificar-capacidad').value = capacidad;
    document.getElementById('modificar-region').value = region;

    // Mostrar el formulario de modificación
    document.getElementById('modificar-vehiculo-form').style.display = 'block';
}
</script>

        <!-- Clientes -->
        <div class="card" id="clientes">
            <h2>Clientes</h2>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>RUT_Cliente</th>
                            <th>Nombre</th>
                            <th>Fecha de Inscripción</th>
                            <th>ID_Tienda</th>
                            <th>Puntos</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each clientes}}
                        <tr>
                            <td>{{this.rut_cliente}}</td>
                            <td>{{this.nombre}}</td>
                            <td>{{this.fecha_inscripcion}}</td>
                            <td>{{this.id_tienda}}</td>
                            <td>{{this.puntos}}</td>
                    <td>
                        <button type="button" onclick="modificarCliente('{{this.rut_cliente}}', '{{this.nombre}}', '{{this.fecha_inscripcion}}', {{this.id_tienda}}, {{this.puntos}})">
                            Modificar
                        </button>
                        <form action="/eliminar-cliente" method="POST" style="display:inline;">
                            <input type="hidden" name="rut_cliente" value="{{this.rut_cliente}}">
                            <button type="submit">Eliminar</button>
                        </form>
                    </td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
<!-- Formulario para agregar un nuevo cliente -->
<h3>Agregar Cliente</h3>
<form action="/agregar-cliente" method="POST">
   <label for="rut_cliente">RUT Cliente:</label>
   <input type="text" id="rut_cliente" name="rut_cliente" required>

   <label for="nombre">Nombre:</label>
   <input type="text" id="nombre" name="nombre" required>

   <label for="fecha_inscripcion">Fecha de Inscripción:</label>
   <input type="date" id="fecha_inscripcion" name="fecha_inscripcion" required>

   <label for="id_tienda">ID Tienda:</label>
   <input type="number" id="id_tienda" name="id_tienda" required>

   <label for="puntos">Puntos:</label>
   <input type="number" id="puntos" name="puntos" required>

   <button type="submit">Agregar Cliente</button>
</form>

<!-- Formulario para modificar un cliente (oculto por defecto) -->
<h3>Modificar Cliente</h3>
<form id="modificar-cliente-form" action="/modificar-cliente" method="POST" style="display: none;">
    <input type="hidden" name="rut_cliente" id="modificar-rut_cliente">

    <label for="modificar-nombre">Nombre:</label>
    <input type="text" name="nombre" id="modificar-nombre" required>

    <label for="modificar-fecha_inscripcion">Fecha de Inscripción:</label>
    <input type="date" name="fecha_inscripcion" id="modificar-fecha_inscripcion" required>

    <label for="modificar-id_tienda">ID Tienda:</label>
    <input type="number" name="id_tienda" id="modificar-id_tienda" required>

    <label for="modificar-puntos">Puntos:</label>
    <input type="number" name="puntos" id="modificar-puntos" required>

    <button type="submit">Modificar</button>
</form>
</div>

<script>
// Función para mostrar el formulario de modificación con los datos actuales
function modificarCliente(rut_cliente, nombre, fecha_inscripcion, id_tienda, puntos) {
    document.getElementById('modificar-rut_cliente').value = rut_cliente;
    document.getElementById('modificar-nombre').value = nombre;
    document.getElementById('modificar-fecha_inscripcion').value = fecha_inscripcion;
    document.getElementById('modificar-id_tienda').value = id_tienda;
    document.getElementById('modificar-puntos').value = puntos;

    // Mostrar el formulario de modificación
    document.getElementById('modificar-cliente-form').style.display = 'block';
}
</script>

<div class="card">
    <h2>Realizar Consulta</h2>
    <form id="consulta-form">
        <!-- Selector de tipo de consulta -->
        <label for="consulta">Selecciona una consulta:</label>
        <select id="consulta" name="consulta" required>
            <option value="inventario">Inventario de Tienda</option>
            <option value="regionVehiculo">Región donde Opera un Vehículo</option>
            <option value="stockProducto">Tienda con Stock de Producto</option>
            <option value="productosVendidos">Productos Más Vendido en un mes</option>
            <option value="categoriaProducto">Categoría de un Producto</option>
            <option value="proveedoresProducto">Proveedores por Producto</option>
            <option value="proveedorEntrega">Proveedor con Menor Tiempo de Entrega</option>
            <option value="cantidadPedidos">Cantidad de Pedidos por una tienda en una Fecha Especifica</option>
            <option value="contratoProveedor">Contratos de Proveedores que han Recibido mas de un Pedido en un Día</option>
            <option value="productoRegion">Tienda con un Producto en una Región</option>
            <option value="trabajador">Fecha de Inicio de Contrato de un Trabajador</option>
            <option value="capacidadVehiculo">Vehículos con Capacidad mayor a 1000kg en una region Región</option>
            <option value="empleadosEdad">Empleados Mayores de 45 años</option>
            <option value="productosBaratos">Marca y categoria de los productos Menos Costosos</option>
            <option value="puntosCliente">Puntos de Cliente</option>
            <option value="clientesInscritos">Clientes Inscritos en una Fecha</option>
            <option value="trabajadoresContrato">Numero de trabajadores con Contrato Próximo a Expirar</option>
        </select>

        <!-- Campos dinámicos -->
        <div id="campos-dinamicos">
            <!-- Los campos se generarán aquí dinámicamente según la consulta seleccionada -->
        </div>

        <button type="submit">Consultar</button>
    </form>

    <div id="resultado-consulta"></div>
</div>

<script>
// Función para generar los campos según la consulta seleccionada
function generarCamposConsulta(tipoConsulta) {
    const camposDinamicos = document.getElementById('campos-dinamicos');
    camposDinamicos.innerHTML = ''; // Limpiar campos previos

    let camposHTML = '';

    switch (tipoConsulta) {
        case 'inventario':
            camposHTML = `
                <label for="tienda">Nombre de la tienda:</label>
                <input type="text" id="tienda" name="tienda" placeholder="Ejemplo: Tienda Colina" required>
            `;
            break;
        case 'regionVehiculo':
            camposHTML = `
                <label for="patente">Patente del vehículo:</label>
                <input type="text" id="patente" name="patente" placeholder="Ejemplo: VWX6789" required>
            `;
            break;
        case 'stockProducto':
            camposHTML = `
                <label for="producto">Nombre del producto:</label>
                <input type="text" id="producto" name="producto" placeholder="Ejemplo: Sábanas" required>
                <label for="stock">Stock máximo:</label>
                <input type="number" id="stock" name="stock" placeholder="Ejemplo: 180" required>
            `;
            break;
        case 'productosVendidos':
            camposHTML = `
                <label for="fecha">Fecha (último mes):</label>
                <input type="month" id="fecha" name="fecha" required>
            `;
            break;
        case 'categoriaProducto':
            camposHTML = `
                <label for="producto">Nombre del producto:</label>
                <input type="text" id="producto" name="producto" placeholder="Ejemplo: Auriculares Bluetooth" required>
            `;
            break;
        case 'proveedoresProducto':
            camposHTML = `
                <label for="categoria">Categoría del producto:</label>
                <input type="text" id="categoria" name="categoria" placeholder="Ejemplo: Decoración" required>
            `;
            break;
        case 'proveedorEntrega':
            camposHTML = `
                <label for="tiempoEntrega">Tiempo de entrega (horas):</label>
                <input type="number" id="tiempoEntrega" name="tiempoEntrega" placeholder="Ejemplo: 4" required>
            `;
            break;
        case 'cantidadPedidos':
            camposHTML = `
                <label for="tienda">Nombre de la tienda:</label>
                <input type="text" id="tienda" name="tienda" placeholder="Ejemplo: Tienda Sur" required>
                <label for="fechaInicio">Fecha de inicio:</label>
                <input type="date" id="fechaInicio" name="fechaInicio" required>
                <label for="fechaFin">Fecha de fin:</label>
                <input type="date" id="fechaFin" name="fechaFin" required>
            `;
            break;
        case 'contratoProveedor':
            camposHTML = `
                <label for="fecha">Fecha (Ejemplo: 2024-07-12):</label>
                <input type="date" id="fecha" name="fecha" required>
            `;
            break;
        case 'productoRegion':
            camposHTML = `
                <label for="producto">Nombre del producto:</label>
                <input type="text" id="producto" name="producto" placeholder="Ejemplo: Almohadas" required>
                <label for="region">Región:</label>
                <input type="text" id="region" name="region" placeholder="Ejemplo: Coquimbo" required>
            `;
            break;
        case 'trabajador':
            camposHTML = `
                <label for="trabajador">Nombre del trabajador:</label>
                <input type="text" id="trabajador" name="trabajador" placeholder="Ejemplo: Carla Sánchez" required>
            `;
            break;
        case 'capacidadVehiculo':
            camposHTML = `
                <label for="capacidad">Capacidad mínima (kg):</label>
                <input type="number" id="capacidad" name="capacidad" placeholder="Ejemplo: 1000" required>
                <label for="region">Región:</label>
                <input type="text" id="region" name="region" placeholder="Ejemplo: Araucanía" required>
            `;
            break;
        case 'empleadosEdad':
            camposHTML = `
                <label for="edad">Edad mínima:</label>
                <input type="number" id="edad" name="edad" placeholder="Ejemplo: 45" required>
                <label for="trabajo">Trabajo específico:</label>
                <input type="text" id="trabajo" name="trabajo" placeholder="Ejemplo: Conductor" required>
            `;
            break;
        case 'productosBaratos':
            camposHTML = `
                <label for="producto">Producto menos costoso:</label>
                <input type="text" id="producto" name="producto" placeholder="Ejemplo: Nombre producto" required>
            `;
            break;
        case 'puntosCliente':
            camposHTML = `
                <label for="cliente">Nombre del cliente:</label>
                <input type="text" id="cliente" name="cliente" placeholder="Ejemplo: Martín Reyes" required>
            `;
            break;
        case 'clientesInscritos':
            camposHTML = `
                <label for="tienda">Nombre de la tienda:</label>
                <input type="text" id="tienda" name="tienda" placeholder="Ejemplo: Tienda Centro" required>
                <label for="fechaInicio">Fecha de inicio:</label>
                <input type="date" id="fechaInicio" name="fechaInicio" required>
                <label for="fechaFin">Fecha de fin:</label>
                <input type="date" id="fechaFin" name="fechaFin" required>
            `;
            break;
        case 'trabajadoresContrato':
            camposHTML = `
                <label for="tienda">Nombre de la tienda:</label>
                <input type="text" id="tienda" name="tienda" placeholder="Ejemplo: Tienda Rio" required>
                <label for="fecha">Fecha de expiración de contrato:</label>
                <input type="date" id="fecha" name="fecha" required>
            `;
            break;
    }

    camposDinamicos.innerHTML = camposHTML;
}

// Evento para cambiar los campos según la consulta seleccionada
document.getElementById('consulta').addEventListener('change', function() {
    generarCamposConsulta(this.value);
});

// Generar campos al cargar la página
generarCamposConsulta(document.getElementById('consulta').value);

// Enviar la consulta y mostrar el resultado
document.getElementById('consulta-form').addEventListener('submit', async function(event) {
    event.preventDefault(); // Prevenir el comportamiento predeterminado del formulario
    const resultadoDiv = document.getElementById('resultado-consulta');
    const consulta = document.getElementById('consulta').value;

    // Capturar todos los campos dinámicos
    const formData = new FormData(event.target);
    const campos = {};
    formData.forEach((value, key) => {
        campos[key] = value;
    });

    // Enviar la consulta al servidor
    try {
        const response = await fetch('/consulta', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ consulta, campos }),
        });

        const data = await response.json();

        if (data.error) {
            resultadoDiv.innerHTML = `<div style="color: red;">${data.error}</div>`;
        } else {
            // Mostrar resultados en formato de tabla o lista
            resultadoDiv.innerHTML = `<pre>${JSON.stringify(data.resultado, null, 2)}</pre>`;
        }
    } catch (err) {
        console.error(err);
        resultadoDiv.innerHTML = `<div style="color: red;">Error al realizar la consulta.</div>`;
    }
});

document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.delete-btn').forEach(button => {
      button.addEventListener('click', async (event) => {
        const id = event.target.getAttribute('data-id');
        const table = event.target.getAttribute('data-table');

        if (confirm('¿Estás seguro de que deseas eliminar este registro?')) {
          try {
            const response = await fetch(`/delete/${table}/${id}`, {
              method: 'DELETE',
            });

            if (response.ok) {
              alert('Registro eliminado con éxito');
              window.location.reload();
            } else {
              alert('Error al eliminar el registro');
            }
          } catch (error) {
            console.error('Error:', error);
            alert('Hubo un problema al procesar la solicitud');
          }
        }
      });
    });
  });
</script>

    </div>
</body>
</html>
